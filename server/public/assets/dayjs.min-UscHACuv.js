import{u as at}from"./use-placeholder-Bc7RdSAY.js";import{d as ne,t as j,X as ee,Y as K,c as re,r as N,V as me,Z as Ee,$ as nt,a0 as Z,a1 as we,a2 as p,a3 as je,a4 as Ue,a5 as it,l as De,a6 as ot,a7 as rt,a8 as lt,N as Te,a9 as Fe,a as w,aa as be,ab as ze,n as ce,ac as Se,ad as G,w as ue,ae as st,f as ae,af as ct,ag as ke,ah as He,i as Xe,ai as Me,aj as ut,m as ge,I as oe,ak as ve,al as dt,L as Ze,am as Ne,an as ft,ao as Re,g as We,p as he,P as vt,H as Oe,ap as Ve,e as Ie,j as ht,u as gt,aq as mt,ar as wt,as as pe,at as yt,au as qe,av as bt,aw as _e,ax as $t}from"./index-D0UB2ddu.js";const[Je,$e]=re("swipe"),St={loop:j,width:K,height:K,vertical:Boolean,autoplay:ee(0),duration:ee(500),touchable:j,lazyRender:Boolean,initialSwipe:ee(0),indicatorColor:String,showIndicators:j,stopPropagation:j},Ge=Symbol(Je);var xt=ne({name:Je,props:St,emits:["change","dragStart","dragEnd"],setup(e,{emit:g,slots:u}){const a=N(),y=N(),o=me({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let O=!1;const D=Ee(),{children:P,linkChildren:x}=nt(Ge),l=Z(()=>P.length),v=Z(()=>o[e.vertical?"height":"width"]),k=Z(()=>e.vertical?D.deltaY.value:D.deltaX.value),C=Z(()=>o.rect?(e.vertical?o.rect.height:o.rect.width)-v.value*l.value:0),z=Z(()=>v.value?Math.ceil(Math.abs(C.value)/v.value):l.value),U=Z(()=>l.value*v.value),b=Z(()=>(o.active+l.value)%l.value),Y=Z(()=>{const r=e.vertical?"vertical":"horizontal";return D.direction.value===r}),F=Z(()=>{const r={transitionDuration:`${o.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${+o.offset.toFixed(2)}px)`};if(v.value){const $=e.vertical?"height":"width",S=e.vertical?"width":"height";r[$]=`${U.value}px`,r[S]=e[S]?`${e[S]}px`:""}return r}),T=r=>{const{active:$}=o;return r?e.loop?G($+r,-1,l.value):G($+r,0,z.value):$},H=(r,$=0)=>{let S=r*v.value;e.loop||(S=Math.min(S,-C.value));let _=$-S;return e.loop||(_=G(_,C.value,0)),_},R=({pace:r=0,offset:$=0,emitChange:S})=>{if(l.value<=1)return;const{active:_}=o,L=T(r),V=H(L,$);if(e.loop){if(P[0]&&V!==C.value){const q=V<C.value;P[0].setOffset(q?U.value:0)}if(P[l.value-1]&&V!==0){const q=V>0;P[l.value-1].setOffset(q?-U.value:0)}}o.active=L,o.offset=V,S&&L!==_&&g("change",b.value)},B=()=>{o.swiping=!0,o.active<=-1?R({pace:l.value}):o.active>=l.value&&R({pace:-l.value})},J=()=>{B(),D.reset(),be(()=>{o.swiping=!1,R({pace:-1,emitChange:!0})})},d=()=>{B(),D.reset(),be(()=>{o.swiping=!1,R({pace:1,emitChange:!0})})};let M;const I=()=>clearTimeout(M),h=()=>{I(),+e.autoplay>0&&l.value>1&&(M=setTimeout(()=>{d(),h()},+e.autoplay))},A=(r=+e.initialSwipe)=>{if(!a.value)return;const $=()=>{var S,_;if(!ze(a)){const L={width:a.value.offsetWidth,height:a.value.offsetHeight};o.rect=L,o.width=+((S=e.width)!=null?S:L.width),o.height=+((_=e.height)!=null?_:L.height)}l.value&&(r=Math.min(l.value-1,r),r===-1&&(r=l.value-1)),o.active=r,o.swiping=!0,o.offset=H(r),P.forEach(L=>{L.setOffset(0)}),h()};ze(a)?ce().then($):$()},X=()=>A(o.active);let m;const s=r=>{!e.touchable||r.touches.length>1||(D.start(r),O=!1,m=Date.now(),I(),B())},t=r=>{e.touchable&&o.swiping&&(D.move(r),Y.value&&(!e.loop&&(o.active===0&&k.value>0||o.active===l.value-1&&k.value<0)||(Se(r,e.stopPropagation),R({offset:k.value}),O||(g("dragStart",{index:b.value}),O=!0))))},i=()=>{if(!e.touchable||!o.swiping)return;const r=Date.now()-m,$=k.value/r;if((Math.abs($)>.25||Math.abs(k.value)>v.value/2)&&Y.value){const _=e.vertical?D.offsetY.value:D.offsetX.value;let L=0;e.loop?L=_>0?k.value>0?-1:1:0:L=-Math[k.value>0?"ceil":"floor"](k.value/v.value),R({pace:L,emitChange:!0})}else k.value&&R({pace:0});O=!1,o.swiping=!1,g("dragEnd",{index:b.value}),h()},n=(r,$={})=>{B(),D.reset(),be(()=>{let S;e.loop&&r===l.value?S=o.active===0?0:r:S=r%l.value,$.immediate?be(()=>{o.swiping=!1}):o.swiping=!1,R({pace:S-o.active,emitChange:!0})})},c=(r,$)=>{const S=$===b.value,_=S?{backgroundColor:e.indicatorColor}:void 0;return w("i",{style:_,class:$e("indicator",{active:S})},null)},f=()=>{if(u.indicator)return u.indicator({active:b.value,total:l.value});if(e.showIndicators&&l.value>1)return w("div",{class:$e("indicators",{vertical:e.vertical})},[Array(l.value).fill("").map(c)])};return we({prev:J,next:d,state:o,resize:X,swipeTo:n}),x({size:v,props:e,count:l,activeIndicator:b}),p(()=>e.initialSwipe,r=>A(+r)),p(l,()=>A(o.active)),p(()=>e.autoplay,h),p([je,Ue,()=>e.width,()=>e.height],X),p(it(),r=>{r==="visible"?h():I()}),De(A),ot(()=>A(o.active)),rt(()=>A(o.active)),lt(I),Te(I),Fe("touchmove",t,{target:y}),()=>{var r;return w("div",{ref:a,class:$e()},[w("div",{ref:y,style:F.value,class:$e("track",{vertical:e.vertical}),onTouchstartPassive:s,onTouchend:i,onTouchcancel:i},[(r=u.default)==null?void 0:r.call(u)]),f()])}}});const Ct=ue(xt),[It,Dt]=re("swipe-item");var kt=ne({name:It,setup(e,{slots:g}){let u;const a=me({offset:0,inited:!1,mounted:!1}),{parent:y,index:o}=st(Ge);if(!y)return;const O=Z(()=>{const x={},{vertical:l}=y.props;return y.size.value&&(x[l?"height":"width"]=`${y.size.value}px`),a.offset&&(x.transform=`translate${l?"Y":"X"}(${a.offset}px)`),x}),D=Z(()=>{const{loop:x,lazyRender:l}=y.props;if(!l||u)return!0;if(!a.mounted)return!1;const v=y.activeIndicator.value,k=y.count.value-1,C=v===0&&x?k:v-1,z=v===k&&x?0:v+1;return u=o.value===v||o.value===C||o.value===z,u}),P=x=>{a.offset=x};return De(()=>{ce(()=>{a.mounted=!0})}),we({setOffset:P}),()=>{var x;return w("div",{class:Dt(),style:O.value},[D.value?(x=g.default)==null?void 0:x.call(g):null])}}});const Pt=ue(kt),[Mt,le]=re("image"),Ot={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:K,height:K,radius:K,lazyLoad:Boolean,iconSize:K,showError:j,errorIcon:ae("photo-fail"),iconPrefix:String,showLoading:j,loadingIcon:ae("photo"),crossorigin:String,referrerpolicy:String,decoding:String};var Tt=ne({name:Mt,props:Ot,emits:["load","error"],setup(e,{emit:g,slots:u}){const a=N(!1),y=N(!0),o=N(),{$Lazyload:O}=ct().proxy,D=Z(()=>{const b={width:ke(e.width),height:ke(e.height)};return He(e.radius)&&(b.overflow="hidden",b.borderRadius=ke(e.radius)),b});p(()=>e.src,()=>{a.value=!1,y.value=!0});const P=b=>{y.value&&(y.value=!1,g("load",b))},x=()=>{const b=new Event("load");Object.defineProperty(b,"target",{value:o.value,enumerable:!0}),P(b)},l=b=>{a.value=!0,y.value=!1,g("error",b)},v=(b,Y,F)=>F?F():w(oe,{name:b,size:e.iconSize,class:Y,classPrefix:e.iconPrefix},null),k=()=>{if(y.value&&e.showLoading)return w("div",{class:le("loading")},[v(e.loadingIcon,le("loading-icon"),u.loading)]);if(a.value&&e.showError)return w("div",{class:le("error")},[v(e.errorIcon,le("error-icon"),u.error)])},C=()=>{if(a.value||!e.src)return;const b={alt:e.alt,class:le("img"),decoding:e.decoding,style:{objectFit:e.fit,objectPosition:e.position},crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy};return e.lazyLoad?Me(w("img",ge({ref:o},b),null),[[ut("lazy"),e.src]]):w("img",ge({ref:o,src:e.src,onLoad:P,onError:l},b),null)},z=({el:b})=>{const Y=()=>{b===o.value&&y.value&&x()};o.value?Y():ce(Y)},U=({el:b})=>{b===o.value&&!a.value&&l()};return O&&Xe&&(O.$on("loaded",z),O.$on("error",U),Te(()=>{O.$off("loaded",z),O.$off("error",U)})),De(()=>{ce(()=>{var b;(b=o.value)!=null&&b.complete&&!e.lazyLoad&&x()})}),()=>{var b;return w("div",{class:le({round:e.round,block:e.block}),style:D.value},[C(),k(),(b=u.default)==null?void 0:b.call(u)])}}});const Ke=ue(Tt),Le=e=>Math.sqrt((e[0].clientX-e[1].clientX)**2+(e[0].clientY-e[1].clientY)**2),zt=e=>({x:(e[0].clientX+e[1].clientX)/2,y:(e[0].clientY+e[1].clientY)/2}),Pe=re("image-preview")[1],Ae=2.6,Rt={src:String,show:Boolean,active:Number,minZoom:ve(K),maxZoom:ve(K),rootWidth:ve(Number),rootHeight:ve(Number),disableZoom:Boolean,doubleScale:Boolean,closeOnClickImage:Boolean,closeOnClickOverlay:Boolean,vertical:Boolean};var _t=ne({props:Rt,emits:["scale","close","longPress"],setup(e,{emit:g,slots:u}){const a=me({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,initializing:!1,imageRatio:0}),y=Ee(),o=N(),O=N(),D=N(!1),P=N(!1);let x=0;const l=Z(()=>{const{scale:t,moveX:i,moveY:n,moving:c,zooming:f,initializing:r}=a,$={transitionDuration:f||c||r?"0s":".3s"};return(t!==1||P.value)&&($.transform=`matrix(${t}, 0, 0, ${t}, ${i}, ${n})`),$}),v=Z(()=>{if(a.imageRatio){const{rootWidth:t,rootHeight:i}=e,n=D.value?i/a.imageRatio:t;return Math.max(0,(a.scale*n-t)/2)}return 0}),k=Z(()=>{if(a.imageRatio){const{rootWidth:t,rootHeight:i}=e,n=D.value?i:t*a.imageRatio;return Math.max(0,(a.scale*n-i)/2)}return 0}),C=(t,i)=>{var n;if(t=G(t,+e.minZoom,+e.maxZoom+1),t!==a.scale){const c=t/a.scale;if(a.scale=t,i){const f=Ne((n=o.value)==null?void 0:n.$el),r={x:f.width*.5,y:f.height*.5},$=a.moveX-(i.x-f.left-r.x)*(c-1),S=a.moveY-(i.y-f.top-r.y)*(c-1);a.moveX=G($,-v.value,v.value),a.moveY=G(S,-k.value,k.value)}else a.moveX=0,a.moveY=P.value?x:0;g("scale",{scale:t,index:e.active})}},z=()=>{C(1)},U=()=>{const t=a.scale>1?1:2;C(t,t===2||P.value?{x:y.startX.value,y:y.startY.value}:void 0)};let b,Y,F,T,H,R,B,J,d=!1;const M=t=>{const{touches:i}=t;if(b=i.length,b===2&&e.disableZoom)return;const{offsetX:n}=y;y.start(t),Y=a.moveX,F=a.moveY,J=Date.now(),d=!1,a.moving=b===1&&(a.scale!==1||P.value),a.zooming=b===2&&!n.value,a.zooming&&(T=a.scale,H=Le(i))},I=t=>{const{touches:i}=t;if(y.move(t),a.moving){const{deltaX:n,deltaY:c}=y,f=n.value+Y,r=c.value+F;if((e.vertical?y.isVertical()&&Math.abs(r)>k.value:y.isHorizontal()&&Math.abs(f)>v.value)&&!d){a.moving=!1;return}d=!0,Se(t,!0),a.moveX=G(f,-v.value,v.value),a.moveY=G(r,-k.value,k.value)}if(a.zooming&&(Se(t,!0),i.length===2)){const n=Le(i),c=T*n/H;R=zt(i),C(c,R)}},h=t=>{var i;const n=(i=O.value)==null?void 0:i.$el;if(!n)return;const c=n.firstElementChild,f=t.target===n,r=c==null?void 0:c.contains(t.target);!e.closeOnClickImage&&r||!e.closeOnClickOverlay&&f||g("close")},A=t=>{if(b>1)return;const i=Date.now()-J,n=250;y.isTap.value&&(i<n?e.doubleScale?B?(clearTimeout(B),B=null,U()):B=setTimeout(()=>{h(t),B=null},n):h(t):i>ft&&g("longPress"))},X=t=>{let i=!1;if((a.moving||a.zooming)&&(i=!0,a.moving&&Y===a.moveX&&F===a.moveY&&(i=!1),!t.touches.length)){a.zooming&&(a.moveX=G(a.moveX,-v.value,v.value),a.moveY=G(a.moveY,-k.value,k.value),a.zooming=!1),a.moving=!1,Y=0,F=0,T=1,a.scale<1&&z();const n=+e.maxZoom;a.scale>n&&C(n,R)}Se(t,i),A(t),y.reset()},m=()=>{const{rootWidth:t,rootHeight:i}=e,n=i/t,{imageRatio:c}=a;D.value=a.imageRatio>n&&c<Ae,P.value=a.imageRatio>n&&c>=Ae,P.value&&(x=(c*t-i)/2,a.moveY=x,a.initializing=!0,dt(()=>{a.initializing=!1})),z()},s=t=>{const{naturalWidth:i,naturalHeight:n}=t.target;a.imageRatio=n/i,m()};return p(()=>e.active,z),p(()=>e.show,t=>{t||z()}),p(()=>[e.rootWidth,e.rootHeight],m),Fe("touchmove",I,{target:Z(()=>{var t;return(t=O.value)==null?void 0:t.$el})}),we({resetScale:z}),()=>{const t={loading:()=>w(Ze,{type:"spinner"},null)};return w(Pt,{ref:O,class:Pe("swipe-item"),onTouchstartPassive:M,onTouchend:X,onTouchcancel:X},{default:()=>[u.image?w("div",{class:Pe("image-wrap")},[u.image({src:e.src,onLoad:s,style:l.value})]):w(Ke,{ref:o,src:e.src,fit:"contain",class:Pe("image",{vertical:D.value}),style:l.value,onLoad:s},t)]})}}});const[Lt,se]=re("image-preview"),At=["show","teleport","transition","overlayStyle","closeOnPopstate"],Bt={show:Boolean,loop:j,images:We(),minZoom:ee(1/3),maxZoom:ee(3),overlay:j,vertical:Boolean,closeable:Boolean,showIndex:j,className:Re,closeIcon:ae("clear"),transition:String,beforeClose:Function,doubleScale:j,overlayClass:Re,overlayStyle:Object,swipeDuration:ee(300),startPosition:ee(0),showIndicators:Boolean,closeOnPopstate:j,closeOnClickImage:j,closeOnClickOverlay:j,closeIconPosition:ae("top-right"),teleport:[String,Object]};var Qe=ne({name:Lt,props:Bt,emits:["scale","close","closed","change","longPress","update:show"],setup(e,{emit:g,slots:u}){const a=N(),y=N(),o=me({active:0,rootWidth:0,rootHeight:0,disableZoom:!1}),O=()=>{if(a.value){const T=Ne(a.value.$el);o.rootWidth=T.width,o.rootHeight=T.height,a.value.resize()}},D=T=>g("scale",T),P=T=>g("update:show",T),x=()=>{Ve(e.beforeClose,{args:[o.active],done:()=>P(!1)})},l=T=>{T!==o.active&&(o.active=T,g("change",T))},v=()=>{if(e.showIndex)return w("div",{class:se("index")},[u.index?u.index({index:o.active}):`${o.active+1} / ${e.images.length}`])},k=()=>{if(u.cover)return w("div",{class:se("cover")},[u.cover()])},C=()=>{o.disableZoom=!0},z=()=>{o.disableZoom=!1},U=()=>w(Ct,{ref:a,lazyRender:!0,loop:e.loop,class:se("swipe"),vertical:e.vertical,duration:e.swipeDuration,initialSwipe:e.startPosition,showIndicators:e.showIndicators,indicatorColor:"white",onChange:l,onDragEnd:z,onDragStart:C},{default:()=>[e.images.map((T,H)=>w(_t,{ref:R=>{H===o.active&&(y.value=R)},src:T,show:e.show,active:o.active,maxZoom:e.maxZoom,minZoom:e.minZoom,rootWidth:o.rootWidth,rootHeight:o.rootHeight,disableZoom:o.disableZoom,doubleScale:e.doubleScale,closeOnClickImage:e.closeOnClickImage,closeOnClickOverlay:e.closeOnClickOverlay,vertical:e.vertical,onScale:D,onClose:x,onLongPress:()=>g("longPress",{index:H})},{image:u.image}))]}),b=()=>{if(e.closeable)return w(oe,{role:"button",name:e.closeIcon,class:[se("close-icon",e.closeIconPosition),Oe],onClick:x},null)},Y=()=>g("closed"),F=(T,H)=>{var R;return(R=a.value)==null?void 0:R.swipeTo(T,H)};return we({resetScale:()=>{var T;(T=y.value)==null||T.resetScale()},swipeTo:F}),De(O),p([je,Ue],O),p(()=>e.startPosition,T=>l(+T)),p(()=>e.show,T=>{const{images:H,startPosition:R}=e;T?(l(+R),ce(()=>{O(),F(+R,{immediate:!0})})):g("close",{index:o.active,url:H[o.active]})}),()=>w(vt,ge({class:[se(),e.className],overlayClass:[se("overlay"),e.overlayClass],onClosed:Y,"onUpdate:show":P},he(e,At)),{default:()=>[b(),U(),v(),k()]})}});let xe;const Yt={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,vertical:!1,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,doubleScale:!0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeOnClickOverlay:!0,closeIconPosition:"top-right"};function Et(){({instance:xe}=ht({setup(){const{state:e,toggle:g}=gt(),u=()=>{e.images=[]};return()=>w(Qe,ge(e,{onClosed:u,"onUpdate:show":g}),null)}}))}const jt=(e,g=0)=>{if(Xe)return xe||Et(),e=Array.isArray(e)?{images:e,startPosition:g}:e,xe.open(Ie({},Yt,e)),xe};ue(Qe);const[Ut,Q]=re("nav-bar"),Ft={title:String,fixed:Boolean,zIndex:K,border:j,leftText:String,rightText:String,leftDisabled:Boolean,rightDisabled:Boolean,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,clickable:j};var Ht=ne({name:Ut,props:Ft,emits:["clickLeft","clickRight"],setup(e,{emit:g,slots:u}){const a=N(),y=at(a,Q),o=l=>{e.leftDisabled||g("clickLeft",l)},O=l=>{e.rightDisabled||g("clickRight",l)},D=()=>u.left?u.left():[e.leftArrow&&w(oe,{class:Q("arrow"),name:"arrow-left"},null),e.leftText&&w("span",{class:Q("text")},[e.leftText])],P=()=>u.right?u.right():w("span",{class:Q("text")},[e.rightText]),x=()=>{const{title:l,fixed:v,border:k,zIndex:C}=e,z=mt(C),U=e.leftArrow||e.leftText||u.left,b=e.rightText||u.right;return w("div",{ref:a,style:z,class:[Q({fixed:v}),{[wt]:k,"van-safe-area-top":e.safeAreaInsetTop}]},[w("div",{class:Q("content")},[U&&w("div",{class:[Q("left",{disabled:e.leftDisabled}),e.clickable&&!e.leftDisabled?Oe:""],onClick:o},[D()]),w("div",{class:[Q("title"),"van-ellipsis"]},[u.title?u.title():l]),b&&w("div",{class:[Q("right",{disabled:e.rightDisabled}),e.clickable&&!e.rightDisabled?Oe:""],onClick:O},[P()])])])};return()=>e.fixed&&e.placeholder?y(x):x()}});const na=ue(Ht),[Xt,E,Zt]=re("uploader");function Be(e,g){return new Promise(u=>{if(g==="file"){u();return}const a=new FileReader;a.onload=y=>{u(y.target.result)},g==="dataUrl"?a.readAsDataURL(e):g==="text"&&a.readAsText(e)})}function et(e,g){return pe(e).some(u=>u.file?yt(g)?g(u.file):u.file.size>+g:!1)}function Nt(e,g){const u=[],a=[];return e.forEach(y=>{et(y,g)?a.push(y):u.push(y)}),{valid:u,invalid:a}}const Wt=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg|avif)/i,Vt=e=>Wt.test(e);function tt(e){return e.isImage?!0:e.file&&e.file.type?e.file.type.indexOf("image")===0:e.url?Vt(e.url):typeof e.content=="string"?e.content.indexOf("data:image")===0:!1}var pt=ne({props:{name:K,item:ve(Object),index:Number,imageFit:String,lazyLoad:Boolean,deletable:Boolean,reupload:Boolean,previewSize:[Number,String,Array],beforeDelete:Function},emits:["delete","preview","reupload"],setup(e,{emit:g,slots:u}){const a=()=>{const{status:l,message:v}=e.item;if(l==="uploading"||l==="failed"){const k=l==="failed"?w(oe,{name:"close",class:E("mask-icon")},null):w(Ze,{class:E("loading")},null),C=He(v)&&v!=="";return w("div",{class:E("mask")},[k,C&&w("div",{class:E("mask-message")},[v])])}},y=l=>{const{name:v,item:k,index:C,beforeDelete:z}=e;l.stopPropagation(),Ve(z,{args:[k,{name:v,index:C}],done:()=>g("delete")})},o=()=>g("preview"),O=()=>g("reupload"),D=()=>{if(e.deletable&&e.item.status!=="uploading"){const l=u["preview-delete"];return w("div",{role:"button",class:E("preview-delete",{shadow:!l}),tabindex:0,"aria-label":Zt("delete"),onClick:y},[l?l():w(oe,{name:"cross",class:E("preview-delete-icon")},null)])}},P=()=>{if(u["preview-cover"]){const{index:l,item:v}=e;return w("div",{class:E("preview-cover")},[u["preview-cover"](Ie({index:l},v))])}},x=()=>{const{item:l,lazyLoad:v,imageFit:k,previewSize:C,reupload:z}=e;return tt(l)?w(Ke,{fit:k,src:l.objectUrl||l.content||l.url,class:E("preview-image"),width:Array.isArray(C)?C[0]:C,height:Array.isArray(C)?C[1]:C,lazyLoad:v,onClick:z?O:o},{default:P}):w("div",{class:E("file"),style:qe(e.previewSize)},[w(oe,{class:E("file-icon"),name:"description"},null),w("div",{class:[E("file-name"),"van-ellipsis"]},[l.file?l.file.name:l.url]),P()])};return()=>w("div",{class:E("preview")},[x(),a(),D()])}});const qt={name:ee(""),accept:ae("image/*"),capture:String,multiple:Boolean,disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,maxCount:ee(1/0),imageFit:ae("cover"),resultType:ae("dataUrl"),uploadIcon:ae("photograph"),uploadText:String,deletable:j,reupload:Boolean,afterRead:Function,showUpload:j,modelValue:We(),beforeRead:Function,beforeDelete:Function,previewSize:[Number,String,Array],previewImage:j,previewOptions:Object,previewFullImage:j,maxSize:{type:[Number,String,Function],default:1/0}};var Jt=ne({name:Xt,props:qt,emits:["delete","oversize","clickUpload","closePreview","clickPreview","clickReupload","update:modelValue"],setup(e,{emit:g,slots:u}){const a=N(),y=[],o=N(-1),O=N(!1),D=(d=e.modelValue.length)=>({name:e.name,index:d}),P=()=>{a.value&&(a.value.value="")},x=d=>{if(P(),et(d,e.maxSize))if(Array.isArray(d)){const M=Nt(d,e.maxSize);if(d=M.valid,g("oversize",M.invalid,D()),!d.length)return}else{g("oversize",d,D());return}if(d=me(d),o.value>-1){const M=[...e.modelValue];M.splice(o.value,1,d),g("update:modelValue",M),o.value=-1}else g("update:modelValue",[...e.modelValue,...pe(d)]);e.afterRead&&e.afterRead(d,D())},l=d=>{const{maxCount:M,modelValue:I,resultType:h}=e;if(Array.isArray(d)){const A=+M-I.length;d.length>A&&(d=d.slice(0,A)),Promise.all(d.map(X=>Be(X,h))).then(X=>{const m=d.map((s,t)=>{const i={file:s,status:"",message:"",objectUrl:URL.createObjectURL(s)};return X[t]&&(i.content=X[t]),i});x(m)})}else Be(d,h).then(A=>{const X={file:d,status:"",message:"",objectUrl:URL.createObjectURL(d)};A&&(X.content=A),x(X)})},v=d=>{const{files:M}=d.target;if(e.disabled||!M||!M.length)return;const I=M.length===1?M[0]:[].slice.call(M);if(e.beforeRead){const h=e.beforeRead(I,D());if(!h){P();return}if($t(h)){h.then(A=>{l(A||I)}).catch(P);return}}l(I)};let k;const C=()=>g("closePreview"),z=d=>{if(e.previewFullImage){const M=e.modelValue.filter(tt),I=M.map(h=>(h.objectUrl&&!h.url&&h.status!=="failed"&&(h.url=h.objectUrl,y.push(h.url)),h.url)).filter(Boolean);k=jt(Ie({images:I,startPosition:M.indexOf(d),onClose:C},e.previewOptions))}},U=()=>{k&&k.close()},b=(d,M)=>{const I=e.modelValue.slice(0);I.splice(M,1),g("update:modelValue",I),g("delete",d,D(M))},Y=d=>{O.value=!0,o.value=d,ce(()=>J())},F=()=>{O.value||(o.value=-1),O.value=!1},T=(d,M)=>{const I=["imageFit","deletable","reupload","previewSize","beforeDelete"],h=Ie(he(e,I),he(d,I,!0));return w(pt,ge({item:d,index:M,onClick:()=>g(e.reupload?"clickReupload":"clickPreview",d,D(M)),onDelete:()=>b(d,M),onPreview:()=>z(d),onReupload:()=>Y(M)},he(e,["name","lazyLoad"]),h),he(u,["preview-cover","preview-delete"]))},H=()=>{if(e.previewImage)return e.modelValue.map(T)},R=d=>g("clickUpload",d),B=()=>{const d=e.modelValue.length<+e.maxCount,M=e.readonly?null:w("input",{ref:a,type:"file",class:E("input"),accept:e.accept,capture:e.capture,multiple:e.multiple&&o.value===-1,disabled:e.disabled,onChange:v,onClick:F},null);return u.default?Me(w("div",{class:E("input-wrapper"),onClick:R},[u.default(),M]),[[_e,d]]):Me(w("div",{class:E("upload",{readonly:e.readonly}),style:qe(e.previewSize),onClick:R},[w(oe,{name:e.uploadIcon,class:E("upload-icon")},null),e.uploadText&&w("span",{class:E("upload-text")},[e.uploadText]),M]),[[_e,e.showUpload&&d]])},J=()=>{a.value&&!e.disabled&&a.value.click()};return Te(()=>{y.forEach(d=>URL.revokeObjectURL(d))}),we({chooseFile:J,reuploadFile:Y,closeImagePreview:U}),bt(()=>e.modelValue),()=>w("div",{class:E()},[w("div",{class:E("wrapper",{disabled:e.disabled})},[H(),B()])])}});const ia=ue(Jt);function Gt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ce={exports:{}},Kt=Ce.exports,Ye;function Qt(){return Ye||(Ye=1,function(e,g){(function(u,a){e.exports=a()})(Kt,function(){var u=1e3,a=6e4,y=36e5,o="millisecond",O="second",D="minute",P="hour",x="day",l="week",v="month",k="quarter",C="year",z="date",U="Invalid Date",b=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,F={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(m){var s=["th","st","nd","rd"],t=m%100;return"["+m+(s[(t-20)%10]||s[t]||s[0])+"]"}},T=function(m,s,t){var i=String(m);return!i||i.length>=s?m:""+Array(s+1-i.length).join(t)+m},H={s:T,z:function(m){var s=-m.utcOffset(),t=Math.abs(s),i=Math.floor(t/60),n=t%60;return(s<=0?"+":"-")+T(i,2,"0")+":"+T(n,2,"0")},m:function m(s,t){if(s.date()<t.date())return-m(t,s);var i=12*(t.year()-s.year())+(t.month()-s.month()),n=s.clone().add(i,v),c=t-n<0,f=s.clone().add(i+(c?-1:1),v);return+(-(i+(t-n)/(c?n-f:f-n))||0)},a:function(m){return m<0?Math.ceil(m)||0:Math.floor(m)},p:function(m){return{M:v,y:C,w:l,d:x,D:z,h:P,m:D,s:O,ms:o,Q:k}[m]||String(m||"").toLowerCase().replace(/s$/,"")},u:function(m){return m===void 0}},R="en",B={};B[R]=F;var J="$isDayjsObject",d=function(m){return m instanceof A||!(!m||!m[J])},M=function m(s,t,i){var n;if(!s)return R;if(typeof s=="string"){var c=s.toLowerCase();B[c]&&(n=c),t&&(B[c]=t,n=c);var f=s.split("-");if(!n&&f.length>1)return m(f[0])}else{var r=s.name;B[r]=s,n=r}return!i&&n&&(R=n),n||!i&&R},I=function(m,s){if(d(m))return m.clone();var t=typeof s=="object"?s:{};return t.date=m,t.args=arguments,new A(t)},h=H;h.l=M,h.i=d,h.w=function(m,s){return I(m,{locale:s.$L,utc:s.$u,x:s.$x,$offset:s.$offset})};var A=function(){function m(t){this.$L=M(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[J]=!0}var s=m.prototype;return s.parse=function(t){this.$d=function(i){var n=i.date,c=i.utc;if(n===null)return new Date(NaN);if(h.u(n))return new Date;if(n instanceof Date)return new Date(n);if(typeof n=="string"&&!/Z$/i.test(n)){var f=n.match(b);if(f){var r=f[2]-1||0,$=(f[7]||"0").substring(0,3);return c?new Date(Date.UTC(f[1],r,f[3]||1,f[4]||0,f[5]||0,f[6]||0,$)):new Date(f[1],r,f[3]||1,f[4]||0,f[5]||0,f[6]||0,$)}}return new Date(n)}(t),this.init()},s.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},s.$utils=function(){return h},s.isValid=function(){return this.$d.toString()!==U},s.isSame=function(t,i){var n=I(t);return this.startOf(i)<=n&&n<=this.endOf(i)},s.isAfter=function(t,i){return I(t)<this.startOf(i)},s.isBefore=function(t,i){return this.endOf(i)<I(t)},s.$g=function(t,i,n){return h.u(t)?this[i]:this.set(n,t)},s.unix=function(){return Math.floor(this.valueOf()/1e3)},s.valueOf=function(){return this.$d.getTime()},s.startOf=function(t,i){var n=this,c=!!h.u(i)||i,f=h.p(t),r=function(ie,W){var te=h.w(n.$u?Date.UTC(n.$y,W,ie):new Date(n.$y,W,ie),n);return c?te:te.endOf(x)},$=function(ie,W){return h.w(n.toDate()[ie].apply(n.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(W)),n)},S=this.$W,_=this.$M,L=this.$D,V="set"+(this.$u?"UTC":"");switch(f){case C:return c?r(1,0):r(31,11);case v:return c?r(1,_):r(0,_+1);case l:var q=this.$locale().weekStart||0,de=(S<q?S+7:S)-q;return r(c?L-de:L+(6-de),_);case x:case z:return $(V+"Hours",0);case P:return $(V+"Minutes",1);case D:return $(V+"Seconds",2);case O:return $(V+"Milliseconds",3);default:return this.clone()}},s.endOf=function(t){return this.startOf(t,!1)},s.$set=function(t,i){var n,c=h.p(t),f="set"+(this.$u?"UTC":""),r=(n={},n[x]=f+"Date",n[z]=f+"Date",n[v]=f+"Month",n[C]=f+"FullYear",n[P]=f+"Hours",n[D]=f+"Minutes",n[O]=f+"Seconds",n[o]=f+"Milliseconds",n)[c],$=c===x?this.$D+(i-this.$W):i;if(c===v||c===C){var S=this.clone().set(z,1);S.$d[r]($),S.init(),this.$d=S.set(z,Math.min(this.$D,S.daysInMonth())).$d}else r&&this.$d[r]($);return this.init(),this},s.set=function(t,i){return this.clone().$set(t,i)},s.get=function(t){return this[h.p(t)]()},s.add=function(t,i){var n,c=this;t=Number(t);var f=h.p(i),r=function(_){var L=I(c);return h.w(L.date(L.date()+Math.round(_*t)),c)};if(f===v)return this.set(v,this.$M+t);if(f===C)return this.set(C,this.$y+t);if(f===x)return r(1);if(f===l)return r(7);var $=(n={},n[D]=a,n[P]=y,n[O]=u,n)[f]||1,S=this.$d.getTime()+t*$;return h.w(S,this)},s.subtract=function(t,i){return this.add(-1*t,i)},s.format=function(t){var i=this,n=this.$locale();if(!this.isValid())return n.invalidDate||U;var c=t||"YYYY-MM-DDTHH:mm:ssZ",f=h.z(this),r=this.$H,$=this.$m,S=this.$M,_=n.weekdays,L=n.months,V=n.meridiem,q=function(W,te,fe,ye){return W&&(W[te]||W(i,c))||fe[te].slice(0,ye)},de=function(W){return h.s(r%12||12,W,"0")},ie=V||function(W,te,fe){var ye=W<12?"AM":"PM";return fe?ye.toLowerCase():ye};return c.replace(Y,function(W,te){return te||function(fe){switch(fe){case"YY":return String(i.$y).slice(-2);case"YYYY":return h.s(i.$y,4,"0");case"M":return S+1;case"MM":return h.s(S+1,2,"0");case"MMM":return q(n.monthsShort,S,L,3);case"MMMM":return q(L,S);case"D":return i.$D;case"DD":return h.s(i.$D,2,"0");case"d":return String(i.$W);case"dd":return q(n.weekdaysMin,i.$W,_,2);case"ddd":return q(n.weekdaysShort,i.$W,_,3);case"dddd":return _[i.$W];case"H":return String(r);case"HH":return h.s(r,2,"0");case"h":return de(1);case"hh":return de(2);case"a":return ie(r,$,!0);case"A":return ie(r,$,!1);case"m":return String($);case"mm":return h.s($,2,"0");case"s":return String(i.$s);case"ss":return h.s(i.$s,2,"0");case"SSS":return h.s(i.$ms,3,"0");case"Z":return f}return null}(W)||f.replace(":","")})},s.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},s.diff=function(t,i,n){var c,f=this,r=h.p(i),$=I(t),S=($.utcOffset()-this.utcOffset())*a,_=this-$,L=function(){return h.m(f,$)};switch(r){case C:c=L()/12;break;case v:c=L();break;case k:c=L()/3;break;case l:c=(_-S)/6048e5;break;case x:c=(_-S)/864e5;break;case P:c=_/y;break;case D:c=_/a;break;case O:c=_/u;break;default:c=_}return n?c:h.a(c)},s.daysInMonth=function(){return this.endOf(v).$D},s.$locale=function(){return B[this.$L]},s.locale=function(t,i){if(!t)return this.$L;var n=this.clone(),c=M(t,i,!0);return c&&(n.$L=c),n},s.clone=function(){return h.w(this.$d,this)},s.toDate=function(){return new Date(this.valueOf())},s.toJSON=function(){return this.isValid()?this.toISOString():null},s.toISOString=function(){return this.$d.toISOString()},s.toString=function(){return this.$d.toUTCString()},m}(),X=A.prototype;return I.prototype=X,[["$ms",o],["$s",O],["$m",D],["$H",P],["$W",x],["$M",v],["$y",C],["$D",z]].forEach(function(m){X[m[1]]=function(s){return this.$g(s,m[0],m[1])}}),I.extend=function(m,s){return m.$i||(m(s,A,I),m.$i=!0),I},I.locale=M,I.isDayjs=d,I.unix=function(m){return I(1e3*m)},I.en=B[R],I.Ls=B,I.p={},I})}(Ce)),Ce.exports}var ea=Qt();const oa=Gt(ea);export{Ke as I,na as N,ia as U,oa as d};
